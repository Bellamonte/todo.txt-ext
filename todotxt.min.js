var TodoTxt=function(){var i="asc",n="desc",e=/^\s+|\s+$/g,o=/\s+/,s=/^\d{4}$/,r=/^\d{2}$/,h=/^\([A-Z]\)$/,u=/^\s*$/,c=function(r){for(var h,c=r.split("\n"),e=[],o={},s=0;s<c.length;s++)(h=c[s],u.test(h))||e.push(f(h));return o.render=function(n,t){for(var u=o.items(n,t),i="",r=0;r<u.length;r++)i!==""&&(i+="\n"),i+=u[r].render();return i},o.items=function(r,u){var s=[],h,o,f,a;for(r||(r={}),o=0;o<e.length;o++)h=e[o],l(h,r)&&s.push(h);if(t(u)){for(o=0;o<u.length;o++){if(f=u[o],typeof f=="string"&&(u[o]=f={field:f,direction:i}),!f.field)throw new Error("Invalid sort "+f);if(a=["priority","createdDate","completedDate","isComplete"],a.indexOf(f.field)===-1)throw new Error("Cannot sort by this field: "+f.field);f.direction!==n&&(f.direction=i)}var c=null,v=function(t,i,r){var u=t[r.field](),f=i[r.field]();return function(){if(u===f)return 0;switch(r.field){case"isComplete":return r.direction===n?u?1:-1:u?-1:1;case"createdDate":case"completedDate":return u===null?1:f===null?-1:r.direction===n?u<f?1:-1:u<f?-1:1;case"priority":return u===null?r.direction===n?-1:1:f===null?r.direction===n?1:-1:r.direction===n?u<f?1:-1:u<f?-1:1;default:throw new Error("Unhandled sort.field "+r.field);}}()},y=function(n,t){var i,r;try{for(i=0;i<u.length;i++)if(r=v(n,t,u[i]),r!==0)return r}catch(f){c=f}return 0};if(s.sort(y),c)throw new Error(c);}return s},o.length=e.length,o.removeItem=function(n){e=_.reject(e,function(t){return n.id()===t.id()});o.length=e.length},o},l=function(n,i){var r,o,h,s;for(r in i)if(i.hasOwnProperty(r)){if(!n.hasOwnProperty(r))throw new Error("This property is invalid for query: "+r);var u=i[r],f=n[r](),e="direct";typeof u=="function"?e="function":t(u)&&(e="containsAll");switch(e){case"function":if(!u(f))return!1;break;case"containsAll":if(!t(f))throw new Error("Cannot pass array for non-array property");for(o=0;o<u.length;o++){for(h=!1,s=0;s<f.length;s++)if(u[o]===f[s]){h=!0;break}if(!h)return!1}break;case"direct":if(u!==f)return!1;break;default:throw new Error("unexpected queryPropType: "+e);}}return!0},f=function(n){var i={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)}),priority:null,createdDate:null,isComplete:!1,completedDate:null,contexts:[],projects:[],addons:{},textTokens:[]},v;if((i.makePublic=function(){return{id:function(){return i.id},priority:function(){return i.priority},createdDate:function(){return i.createdDate},isComplete:function(){return i.isComplete},completedDate:function(){return i.completedDate},contexts:function(){return i.contexts},projects:function(){return i.projects},addons:function(){return i.addons},textTokens:function(){return i.textTokens},render:function(){return n},completeTask:function(){i.isComplete||(i.isComplete=!0,i.completedDate=new Date,n="x "+a(i.completedDate)+" "+n)},uncompleteTask:function(){if(i.isComplete){i.isComplete=!1;var t=i.completedDate!==null;i.completedDate=null;n=n.split(" ").splice(t?2:1).join(" ")}}}},!n||u.test(n))||(n=n.replace(e,""),n===""))return i.makePublic();var p=n.split(o),c=!0,f=!1,l=!0,y=!0,w=function(n){var i=n.split("-"),o,t;if(i.length!==3)return null;var u=i[0],f=i[1],e=i[2],h=s.test(u)&&r.test(f)&&r.test(e);return h?(o=i.join("/"),t=new Date(o),t.toString()==="Invalid Date")?null:(u=parseInt(u,10),f=parseInt(f,10),e=parseInt(e,10),t.getFullYear()!==u)?null:t.getMonth()!==f-1?null:t.getDate()!==e?null:t:null},b=function(n){var r,s;if(c&&n==="x"){i.isComplete=!0;c=!1;f=!0;return}if(f&&(r=w(n),_.isDate(r))){i.completedDate=r;f=!1;return}if(l&&h.test(n)){i.priority=n[1];c=!1;f=!1;l=!1;return}if(y&&(r=w(n),_.isDate(r))){i.createdDate=r;c=!1;f=!1;l=!1;y=!1;return}if(n.length>1&&n[0]==="@")i.contexts.push(n);else if(n.length>1&&n[0]==="+")i.projects.push(n);else if(n.length>2&&n.indexOf(":")>0&&n.indexOf(":")<n.length-1){var o=n.split(":"),a=o.splice(1),u=o[0],e=a.join(":");i.addons[u]?t(i.addons[u])?i.addons[u].push(e):(s=i.addons[u],i.addons[u]=[s,e]):i.addons[u]=e}else i.textTokens.push(n);l=!1;c=!1;f=!1;y=!1};for(v=0;v<p.length;v++)b(p[v]);return i.makePublic()},a=function(n){var t=function(n,t){for(var i=n.toString();i.length<t;)i="0"+i;return i};return n.getFullYear()+"-"+t(n.getMonth()+1,2)+"-"+t(n.getDate(),2)},t=function(n){return Object.prototype.toString.call(n)==="[object Array]"};return{SORT_ASC:i,SORT_DESC:n,parseFile:c,parseLine:f}}();
/*
//# sourceMappingURL=todotxt.min.js.map
*/