var TodoTxt=function(){var u=/^\s+|\s+$/g,f=/\s+/,e=/^\d{4}$/,t=/^\d{2}$/,o=/^\([A-Z]\)$/,i=/^\s*$/,s=function(n){for(var e,o=n.split("\n"),t=[],u={},f=0;f<o.length;f++)(e=o[f],i.test(e))||t.push(r(e));return u.render=function(n){for(var r=u.items(n),t="",i=0;i<r.length;i++)t!==""&&(t+="\n"),t+=r[i].render();return t},u.items=function(n){var u=[],i,r;for(n||(n={}),i=0;i<t.length;i++)r=t[i],h(r,n)&&u.push(r);return u},u.length=t.length,u.removeItem=function(n){t=_.reject(t,function(t){return n.id()===t.id()});u.length=t.length},u},h=function(t,i){var r,o,h,s;for(r in i)if(i.hasOwnProperty(r)){if(!t.hasOwnProperty(r))throw new Error("This property is invalid for query: "+r);var u=i[r],f=t[r](),e="direct";typeof u=="function"?e="function":n(u)&&(e="containsAll");switch(e){case"function":if(!u(f))return!1;break;case"containsAll":if(!n(f))throw new Error("Cannot pass array for non-array property");for(o=0;o<u.length;o++){for(h=!1,s=0;s<f.length;s++)if(u[o]===f[s]){h=!0;break}if(!h)return!1}break;case"direct":if(u!==f)return!1;break;default:throw new Error("unexpected queryPropType: "+e);}}return!0},r=function(r){var s={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)}),priority:null,createdDate:null,isComplete:!1,completedDate:null,contexts:[],projects:[],addons:{},textTokens:[]},v;if((s.makePublic=function(){return{id:function(){return s.id},priority:function(){return s.priority},createdDate:function(){return s.createdDate},isComplete:function(){return s.isComplete},completedDate:function(){return s.completedDate},contexts:function(){return s.contexts},projects:function(){return s.projects},addons:function(){return s.addons},textTokens:function(){return s.textTokens},render:function(){return r},completeTask:function(){s.isComplete||(s.isComplete=!0,s.completedDate=new Date,r="x "+c(s.completedDate)+" "+r)},uncompleteTask:function(){if(s.isComplete){s.isComplete=!1;var n=s.completedDate!==null;s.completedDate=null;r=r.split(" ").splice(n?2:1).join(" ")}}}},!r||i.test(r))||(r=r.replace(u,""),r===""))return s.makePublic();var p=r.split(f),l=!0,h=!1,a=!0,y=!0,w=function(n){var r=n.split("-"),s,i;if(r.length!==3)return null;var u=r[0],f=r[1],o=r[2],h=e.test(u)&&t.test(f)&&t.test(o);return h?(s=r.join("/"),i=new Date(s),i==="Invalid Date")?null:(u=parseInt(u,10),f=parseInt(f,10),o=parseInt(o,10),i.getFullYear()!==u)?null:i.getMonth()!==f-1?null:i.getDate()!==o?null:i:null},b=function(t){var i,e;if(l&&t==="x"){s.isComplete=!0;l=!1;h=!0;return}if(h&&(i=w(t),_.isDate(i))){s.completedDate=i;h=!1;return}if(a&&o.test(t)){s.priority=t[1];l=!1;h=!1;a=!1;return}if(y&&(i=w(t),_.isDate(i))){s.createdDate=i;l=!1;h=!1;a=!1;y=!1;return}if(t.length>1&&t[0]==="@")s.contexts.push(t);else if(t.length>1&&t[0]==="+")s.projects.push(t);else if(t.length>2&&t.indexOf(":")>0&&t.indexOf(":")<t.length-1){var f=t.split(":"),c=f.splice(1),r=f[0],u=c.join(":");s.addons[r]?n(s.addons[r])?s.addons[r].push(u):(e=s.addons[r],s.addons[r]=[e,u]):s.addons[r]=u}else s.textTokens.push(t);a=!1;l=!1;h=!1;y=!1};for(v=0;v<p.length;v++)b(p[v]);return s.makePublic()},c=function(n){var t=function(n,t){for(var i=n.toString();i.length<t;)i="0"+i;return i};return n.getFullYear()+"-"+t(n.getMonth()+1,2)+"-"+t(n.getDate(),2)},n=function(n){return Object.prototype.toString.call(n)==="[object Array]"};return{parseFile:s,parseLine:r}}();
/*
//# sourceMappingURL=todotxt.min.js.map
*/