var TodoTxt=function(){var r="asc",n="desc",s=/^\s+|\s+$/g,h=/\s+/,c=/^\d{4}$/,f=/^\d{2}$/,l=/^\([A-Z]\)$/,e=/^\s*$/,a=function(t){for(var h,c=t.split("\n"),f=[],o={},s=0;s<c.length;s++)(h=c[s],e.test(h))||f.push(u(h));return o.render=function(n,t){for(var u=o.items(n,t),i="",r=0;r<u.length;r++)i!==""&&(i+="\n"),i+=u[r].render();return i},o.items=function(t,u){var s=[],h,o,e,l;for(t||(t={}),o=0;o<f.length;o++)h=f[o],v(h,t)&&s.push(h);if(i(u)){for(o=0;o<u.length;o++){if(e=u[o],typeof e=="string"&&(u[o]=e={field:e,direction:r}),!e.field)throw new Error("Invalid sort "+e);if(l=["priority","createdDate","completedDate","isComplete"],l.indexOf(e.field)===-1)throw new Error("Cannot sort by this field: "+e.field);e.direction!==n&&(e.direction=r)}var c=null,a=function(t,i,r){var u=t[r.field](),f=i[r.field]();return function(){if(u===f)return 0;switch(r.field){case"isComplete":return r.direction===n?u?1:-1:u?-1:1;case"createdDate":case"completedDate":return u===null?1:f===null?-1:r.direction===n?u<f?1:-1:u<f?-1:1;case"priority":return u===null?r.direction===n?-1:1:f===null?r.direction===n?1:-1:r.direction===n?u<f?1:-1:u<f?-1:1;default:throw new Error("Unhandled sort.field "+r.field);}}()},y=function(n,t){var i,r;try{for(i=0;i<u.length;i++)if(r=a(n,t,u[i]),r!==0)return r}catch(f){c=f}return 0};if(s.sort(y),c)throw new Error(c);}return s},o.length=f.length,o.removeItem=function(n,t){var r,u,i;for(typeof n.render=="function"&&(n=n.render()),r=[],i=0;i<f.length;i++)r[i]=f[i];for(u=0,i=0;i<r.length;i++)if(r[i].render()===n){if(f.splice(u,1),!t)break}else u++;o.length=f.length},o.addItem=function(n){typeof n=="string"&&(n=u(n));n.createdDate()||n.setCreatedDate(new Date);f.push(n);o.length=f.length},o},v=function(n,r){var e,s,c,h;for(e in r)if(r.hasOwnProperty(e)){if(!n.hasOwnProperty(e))throw new Error("This property is invalid for query: "+e);var u=r[e],f=n[e](),o="direct";typeof u=="function"?o="function":i(u)&&(o="containsAll");switch(o){case"function":if(!u(f))return!1;break;case"containsAll":if(!i(f))throw new Error("Cannot pass array for non-array property");for(s=0;s<u.length;s++){for(c=!1,h=0;h<f.length;h++)if(u[s]===f[h]){c=!0;break}if(!c)return!1}break;case"direct":if(t(u)&&t(f))return y(u,f);if(u!==f)return!1;break;default:throw new Error("unexpected queryPropType: "+o);}}return!0},u=function(n){var r={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)}),priority:null,createdDate:null,isComplete:!1,completedDate:null,contexts:[],projects:[],addons:{},textTokens:[]},y;if((r.makePublic=function(){return{id:function(){return r.id},priority:function(){return r.priority},createdDate:function(){return r.createdDate},isComplete:function(){return r.isComplete},completedDate:function(){return r.completedDate},contexts:function(){return r.contexts},projects:function(){return r.projects},addons:function(){return r.addons},textTokens:function(){return r.textTokens},render:function(){return n},completeTask:function(){r.isComplete||(r.isComplete=!0,r.completedDate=new Date,n="x "+o(r.completedDate)+" "+n)},uncompleteTask:function(){var i,t;r.isComplete&&(r.isComplete=!1,i=r.completedDate!==null,r.completedDate=null,t=n.split(" "),t.splice(0,i?2:1),n=t.join(" "))},setCreatedDate:function(i){var u,e,f;t(i)||(i=new Date);i=p(i);u=0;e=r.createdDate===null;r.priority&&u++;r.completedDate&&u++;r.isComplete&&u++;f=n.split(" ");f.splice(u,e?0:1,o(i));n=f.join(" ")}}},!n||e.test(n))||(n=n.replace(s,""),n===""))return r.makePublic();var b=n.split(h),a=!0,u=!1,v=!0,w=!0,k=function(n){var i=n.split("-"),o,t;if(i.length!==3)return null;var r=i[0],u=i[1],e=i[2],s=c.test(r)&&f.test(u)&&f.test(e);return s?(o=i.join("/"),t=new Date(o),t.toString()==="Invalid Date")?null:(r=parseInt(r,10),u=parseInt(u,10),e=parseInt(e,10),t.getFullYear()!==r)?null:t.getMonth()!==u-1?null:t.getDate()!==e?null:t:null},d=function(n){var f,h;if(a&&n==="x"){r.isComplete=!0;a=!1;u=!0;return}if(u&&(f=k(n),t(f))){r.completedDate=f;u=!1;return}if(v&&l.test(n)){r.priority=n[1];a=!1;u=!1;v=!1;return}if(w&&(f=k(n),t(f))){r.createdDate=f;a=!1;u=!1;v=!1;w=!1;return}if(n.length>1&&n[0]==="@")r.contexts.push(n);else if(n.length>1&&n[0]==="+")r.projects.push(n);else if(n.length>2&&n.indexOf(":")>0&&n.indexOf(":")<n.length-1){var s=n.split(":"),c=s.splice(1),e=s[0],o=c.join(":");r.addons[e]?i(r.addons[e])?r.addons[e].push(o):(h=r.addons[e],r.addons[e]=[h,o]):r.addons[e]=o}else r.textTokens.push(n);v=!1;a=!1;u=!1;w=!1};for(y=0;y<b.length;y++)d(b[y]);return r.makePublic()},o=function(n){var t=function(n,t){for(var i=n.toString();i.length<t;)i="0"+i;return i};return n.getFullYear()+"-"+t(n.getMonth()+1,2)+"-"+t(n.getDate(),2)},i=function(n){return Array.isArray?Array.isArray(n):Object.prototype.toString.call(n)==="[object Array]"},t=function(n){return n&&typeof n=="object"&&toString.call(n)=="[object Date]"||!1},y=function(n,t){return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()},p=function(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())};return{SORT_ASC:r,SORT_DESC:n,parseFile:a,parseLine:u}}();
/*
//# sourceMappingURL=todotxt.min.js.map
*/